# 1、索引中有一类型为string的字段str，有值6、30、50，使用range查询大于5就只查出6这一个值。哪位大神有解决办法？
https://elasticsearch.cn/question/5181

【回复】如果是字符，看的是字符的，第一个字符和第一个字符比较，第一个字符排完再排第二个字符。
30和50的第一个字符是3和5，都不比5大。
不足位就补0。5=>05。
最后 Mapping 里面改字段类型和重建才是王道。

# 2、path.data 配置了多个路径后 es的存储和获取机制是什么

path.data 是可以配置多个路径(用逗号隔开)，以下的问题的前提是配置的路径分别对应到一块磁盘。
1、如果配置多个路径，es存储索引的时候 是一个磁盘满了 再去存另外一个吗？
2、如果一个索引跨了两个磁盘，搜索的时候，es需要去两块磁盘上分别做搜索，然后结果做merge吗？ 这样效率是不是还没有一块磁盘来的好？

【回复】：1、1.以shard为单位存储在单个磁盘上，多个shard会分散，不是等满了再用
2.查询的时候是shard并行检索的，所以磁盘分开的话，io会分散到各个磁盘上，效率肯定要高一些，查询结果的merge都是在内存
【源码解读回复】最近也遇到第一个问题。查找网上所有资料均未给出合适的答案，无奈只好硬着头皮去看源码。
好在终于把这个原理理清楚了，来跟大家一起分享一下。

## ES多盘shard分配原理
https://elasticsearch.cn/question/753
假设现在单机环境中有两块磁盘，es的配置文件elasticsearch.yml中的path.data：/index/data,/data2/index/data

配置了两块盘，对应了两个路径。那么我现在要创建hrecord1索引的2个主shard分配原理如下：

首先会创建shard1（我估计ES会优先创建shard编号大的shard，但是影响不大），创建shard1的时候会找出两个路径对应的磁盘空间大的那个盘，
然后将shard1放到那个路径下。

创建shard0的时候，会将/index和/data2磁盘的剩余可用空间相加，然后将这个总和乘以百分之五
将前面创建shard1的磁盘空间减去这个百分之五的值，然后再将这个差值与/data2磁盘剩余空间进行比较，找出磁盘空间大的，然后把shard0放到那个大的磁盘空间上。

说白了，*这个百分之五的空间是ES为那个创建的shard1设置的预留空间*吧。
有错误的地方也欢迎大家指出，一起交流哈！

# 3、elasticsearch suggest 使用中文如何实现?
https://elasticsearch.cn/question/786
现需要实现一个拼写检查错误后给出提示建议的功能，也就是did you mean，看百度，还有豆瓣的搜索上都带有此项，
比如输入拼音liudehua，会问你你是否要找的是刘德华，另外输入天伤人间，提示您是否要找的是天上人间，
诸如此类，想请问使用es如何实现这种功能，官网说使用suggester，但是我感觉对中文没有任何提示效果，
哪位高手能够贴点代码或者给出点思路，感谢了

【回复】：suggest 里面配上中文的 analyzer 也可以，另外自己通过构建查询来返回提示结果也是一种做法

# 4、logstash 导入 elasticsearch，elasticsearch-head集群概览会显示Unassigned
【最通俗的回复】这个是正常的，一个节点没有办法产生多余的一份副本，相同的鸡蛋是不会分配在同一个篮子里的。

# 5、
